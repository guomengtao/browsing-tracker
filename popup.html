<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <style>
    body {
      width: 400px;
      padding: 10px;
    }
    .summary {
      margin: 10px 0;
      padding: 10px;
      border: 1px solid #ccc;
    }
    .stats {
      background: #f5f5f5;
      padding: 10px;
      margin: 10px 0;
      border-radius: 4px;
    }
    .site-list {
      margin: 10px 0;
    }
    .site-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 8px;
      border-bottom: 1px solid #eee;
    }
    .site-info {
      flex: 1;
      min-width: 0;
    }
    .site-stats {
      color: #666;
      font-size: 0.9em;
      margin-left: 10px;
    }
    .sort-controls {
      display: flex;
      gap: 10px;
      margin: 10px 0;
    }
    .sort-button {
      padding: 5px 10px;
      border: 1px solid #ccc;
      border-radius: 4px;
      background: #fff;
      cursor: pointer;
    }
    .sort-button.active {
      background: #4285f4;
      color: white;
      border-color: #4285f4;
    }
    .list-title {
      font-weight: bold;
      margin: 15px 0 10px 0;
      padding-bottom: 5px;
      border-bottom: 2px solid #4285f4;
    }
    .delete-btn {
      background: none;
      border: none;
      color: #999;
      font-size: 18px;
      cursor: pointer;
      padding: 4px 8px;
      margin-left: 8px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s;
    }
    .delete-btn:hover {
      background: #ff4444;
      color: white;
    }
    .export-buttons {
      display: flex;
      gap: 10px;
      margin: 10px 0;
    }
    
    .action-button {
      padding: 8px 16px;
      border: 1px solid #ccc;
      border-radius: 4px;
      background: #fff;
      cursor: pointer;
      transition: all 0.3s;
    }
    
    .action-button:hover {
      background: #4285f4;
      color: white;
      border-color: #4285f4;
    }

    .header-container {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }

    .date-selector {
      padding: 5px 10px;
      border: 1px solid #ccc;
      border-radius: 4px;
      background: #fff;
      font-size: 14px;
      cursor: pointer;
    }

    .date-selector:hover {
      border-color: #4285f4;
    }

    .date-selector:focus {
      outline: none;
      border-color: #4285f4;
      box-shadow: 0 0 0 2px rgba(66, 133, 244, 0.2);
    }
  </style>
  <script src="https://unpkg.com/xlsx/dist/xlsx.full.min.js"></script>
</head>
<body>
  <div class="header-container">
    <h2>网站使用总结</h2>
    <select id="dateSelector" class="date-selector">
      <option value="today">今天</option>
      <!-- 其他日期选项会通过 JavaScript 动态添加 -->
    </select>
  </div>
  <div class="stats">
    <div>今日访问网站数：<span id="uniqueSites">0</span></div>
    <div>总访问次数：<span id="totalVisits">0</span></div>
    <div>Chrome启动次数：<span id="chromeOpenCount">0</span></div>
    <div>Chrome总使用时间：<span id="totalChromeTime">0分钟</span></div>
  </div>
  
  <div class="list-title">访问网站</div>
  <div class="sort-controls">
    <button class="sort-button active" data-list="sites" data-sort="time">按访问时间</button>
    <button class="sort-button" data-list="sites" data-sort="duration">按停留时长</button>
    <button class="sort-button" data-list="sites" data-sort="visits">按访问次数</button>
  </div>
  <div class="site-list" id="sitesList">
    <!-- 网站列表 -->
  </div>

  <div class="list-title">访问明细</div>
  <div class="sort-controls">
    <button class="sort-button active" data-list="records" data-sort="time">按访问时间</button>
    <button class="sort-button" data-list="records" data-sort="duration">按停留时长</button>
    <button class="sort-button" data-list="records" data-sort="visits">按访问次数</button>
  </div>
  <div class="site-list" id="fullList">
    <!-- 访问明细列表 -->
  </div>

  <div class="list-title">数据导出</div>
  <div class="export-buttons">
    <button id="copyData" class="action-button">复制今日浏览数据</button>
    <button id="exportAllData" class="action-button">导出CSV文件</button>
    <button id="exportTxt" class="action-button">导出TXT文件</button>
  </div>

  <div class="list-title">AI 总结</div>
  <div id="summary-container">
    <div id="summary-status"></div>
    <div id="ai-summary"></div>
    <button id="generateSummary" class="action-button">生成 AI 总结</button>
  </div>

  <script src="popup.js"></script>
</body>
</html> 